{"ast":null,"code":"var _this = this,\n    _jsxFileName = \"/Users/learnacademy/Desktop/apartment-app-jeremyagabriel/apartment_app/app/javascript/components/pages/Favorites.js\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return; var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nimport React, { useState, useEffect } from 'react';\nimport { Container } from 'reactstrap';\nimport { NavLink } from 'react-router-dom';\n\nvar Favorites = function Favorites(props) {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      favorites = _useState2[0],\n      setFavorites = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      apts = _useState4[0],\n      setApts = _useState4[1];\n\n  useEffect(function () {\n    getFavorites();\n  }, []);\n\n  var getFavorites = function getFavorites() {\n    fetch(\"/favorites\").then(function (response) {\n      if (response.ok) return response.json();\n    }).then(function (favs) {\n      var favIds = favs.map(function (value) {\n        return value.listing;\n      });\n      console.log(favIds);\n      setFavorites(favIds);\n    }).then(function () {\n      return fetch(\"http://localhost:3000/apartments\");\n    }).then(function (response) {\n      if (response.ok) return response.json();\n    }).then(function (apts) {\n      var sortedApts = apts.sort(function (a, b) {\n        if (a.id === b.id) return 0;else if (a.id > b.id) return 1;else return -1;\n      });\n      console.log(sortedApts);\n      setApts(sortedApts);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"h2\", {\n    style: {\n      textAlign: \"center\",\n      margin: \"80px 0 10px 0\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }\n  }, \"Listings You're Following\"), /*#__PURE__*/React.createElement(Container, {\n    style: {\n      marginBottom: \"50px\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    style: {\n      textAlign: \"center\",\n      margin: \"80px 0 10px 0\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 7\n    }\n  }, \"Apartment Listings\"), apts.map(function (apt, index) {\n    if (favorites.includes(apt.id)) {\n      var owner = false;\n      if (apt.user_id === props.currentUserId) owner = true;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"index-listing-container\",\n        key: index,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(NavLink, {\n        className: \"index-listing-image-wrapper\",\n        to: \"/listings/\".concat(apt.id),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"index-listing-image\",\n        src: apt.image_url,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 91\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"index-listing-right\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 15\n        }\n      }, owner && /*#__PURE__*/React.createElement(\"p\", {\n        className: \"owner-message\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 25\n        }\n      }, \"This is your listing\"), /*#__PURE__*/React.createElement(NavLink, {\n        className: \"index-listing-title\",\n        to: \"/listings/\".concat(apt.id),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }\n      }, apt.subject), /*#__PURE__*/React.createElement(\"p\", {\n        className: \"index-listing-copy\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"strong\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 15\n        }\n      }, apt.bedroom_count, \" Bedroom, \", apt.bathroom_count, \" Bath\"), \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 87\n        }\n      }), apt.city, \", \", apt.state, \" \", /*#__PURE__*/React.createElement(\"br\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 42\n        }\n      }), apt.rent)));\n    }\n  })));\n};\n\nexport default Favorites;","map":{"version":3,"sources":["/Users/learnacademy/Desktop/apartment-app-jeremyagabriel/apartment_app/app/javascript/components/pages/Favorites.js"],"names":["React","useState","useEffect","Container","NavLink","Favorites","props","favorites","setFavorites","apts","setApts","getFavorites","fetch","then","response","ok","json","favs","favIds","map","value","listing","console","log","sortedApts","sort","a","b","id","textAlign","margin","marginBottom","apt","index","includes","owner","user_id","currentUserId","image_url","subject","bedroom_count","bathroom_count","city","state","rent"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport { Container } from 'reactstrap'\nimport { NavLink } from 'react-router-dom'\n\nconst Favorites = props => {\n  const [favorites, setFavorites] = useState([])\n  const [apts, setApts] = useState([])\n\n  useEffect(() =>{\n    getFavorites()},[])\n\n  const getFavorites = () => {\n    fetch(\"/favorites\")\n    .then(response => {\n      if(response.ok) return response.json()\n    })\n    .then(favs => {\n      let favIds = favs.map(value=>value.listing)\n      console.log(favIds)\n      setFavorites(favIds)\n    })\n    .then(() => {\n      return fetch(\"http://localhost:3000/apartments\")\n    })\n    .then(response => {\n      if(response.ok) return response.json()\n    })\n    .then(apts => {\n      let sortedApts = apts.sort((a,b) => {\n        if (a.id === b.id) return 0\n        else if (a.id > b.id) return 1\n        else return -1\n      })\n      console.log(sortedApts)\n      setApts(sortedApts)\n    })\n  }\n\n  return(\n    <>\n      <h2 style={{textAlign:\"center\",margin:\"80px 0 10px 0\"}}>Listings You're Following</h2>\n      <Container style={{marginBottom:\"50px\"}}>\n      <h3 style={{textAlign:\"center\",margin:\"80px 0 10px 0\",}}>Apartment Listings</h3>\n        {apts.map((apt,index) => {\n          if (favorites.includes(apt.id)) {\n            let owner = false\n            if (apt.user_id === props.currentUserId) owner = true\n            return(\n              <div className=\"index-listing-container\" key={index}>\n              <NavLink className=\"index-listing-image-wrapper\" to={`/listings/${apt.id}`}><img className=\"index-listing-image\" src={apt.image_url} /></NavLink>\n              <div className=\"index-listing-right\">\n              {owner && <p className=\"owner-message\">This is your listing</p>}\n              <NavLink className=\"index-listing-title\" to={`/listings/${apt.id}`}>{ apt.subject }</NavLink>\n              <p className=\"index-listing-copy\">\n              <strong>{apt.bedroom_count} Bedroom, {apt.bathroom_count} Bath</strong> <br/>\n              { apt.city}, { apt.state } <br/>\n              { apt.rent }\n              </p>\n              </div>\n              </div>\n            )\n\n          }\n        })}\n      </Container>\n    </>\n  )\n}\n\nexport default Favorites\n"]},"metadata":{},"sourceType":"module"}